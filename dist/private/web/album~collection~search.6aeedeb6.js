(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("li",{staticClass:"song-list-item",on:{dblclick:t.handleClickPlay,contextmenu:function(i){return i.preventDefault(),t.handleClickMenu(i)}}},[t.isHeader?e("div",{staticClass:"header"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5)]):t.isEntity?e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleClickOutside,expression:"handleClickOutside"}],staticClass:"entity",class:[t.theme,{focus:t.isFocusing,dragging:t.isDragging,"dragging-over":t.isDraggingOver}],attrs:{draggable:t.isEditing},on:{dragstart:t.handleDragStart,dragend:t.handleDragEnd,dragenter:t.handleDragEnter,dragleave:t.handleDragLeave,dragover:t.handleDragOver,drop:t.handleDrop,click:t.handleClickEntity}},[e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"handler"})]),t._v(" "),e("div",{staticClass:"number",attrs:{title:"编号"}},[t.isPlayingSong&&"played"!==t.playlistType&&!t.isEditing?e("p",[e("Icon",{attrs:{type:t.isPlaying?"volume":"pause",size:"xs",color:"theme"}})],1):e("p",[t._v("\n                "+t._s(t._f("addZero")(t.index+1))+"\n            ")])]),t._v(" "),e("div",{staticClass:"title",attrs:{title:t.song.title}},[e("p",{domProps:{innerHTML:t._s(t.matchKeywords(t.song.title))}})]),t._v(" "),e("div",{staticClass:"artist",attrs:{title:t.song.artist.join(" / ")}},[e("p",{domProps:{innerHTML:t._s(t.matchKeywords(t.song.artist.join(" / ")))}})]),t._v(" "),e("div",{staticClass:"album",attrs:{title:t.song.album}},[e("p",{domProps:{innerHTML:t._s(t.matchKeywords(t.song.album))}})]),t._v(" "),e("div",{staticClass:"duration",attrs:{title:t.song.durationFmt}},[e("p",[t._v("\n                "+t._s(t.song.durationFmt)+"\n            ")])]),t._v(" "),e("div",{staticClass:"action"},[e("p",[t.isEditing?[e("Icon",{staticClass:"action-icon",attrs:{type:"clear",size:"sm",title:"删除"},nativeOn:{click:function(i){return i.stopPropagation(),t.handleClickDelete(i)}}}),t._v(" "),e("span",{staticClass:"action-icon-cover",class:{active:t.isCover},on:{click:t.handleClickCover}},[t._v("封面")])]:[e("Icon",{staticClass:"action-icon",attrs:{type:"favorite-"+(t.isFavorite?"2":"1"),size:"sm",color:t.isFavorite?"theme":"inherit",title:"收藏歌曲"},nativeOn:{click:function(i){return i.stopPropagation(),t.handleClickFav(i)}}}),t._v(" "),e("Icon",{staticClass:"action-icon",attrs:{type:"play-2",size:"sm",title:"立即播放"},nativeOn:{click:function(i){return i.stopPropagation(),t.handleClickPlay(i)}}}),t._v(" "),e("Icon",{staticClass:"action-icon",attrs:{type:"more",size:"sm",title:"更多操作"},nativeOn:{click:function(i){return i.stopPropagation(),t.handleClickMenu(i)}}})]],2)])],1):e("div",{staticClass:"empty"},[e("p",[t._v("没有更多了……")])])])};n._withStripped=!0;var s=e(7),a=e.n(s),o=e(5),l=e(4),c=e(47),r={name:"song-list-item",components:{Icon:o.a},directives:{ClickOutside:c.a},inject:["handleMenu"],props:{type:{type:String,required:!0,validator:function(t){return["header","entity","empty"].includes(t)}},theme:{type:String,default:"white",validator:function(t){return["white","gray","dark"].includes(t)}},song:{type:Object},highlight:{type:String},index:{type:Number,default:0},playlistType:{type:String,default:""},collection:{type:Number,default:0},isEditing:{type:Boolean,default:!1},isCover:{type:Boolean,default:!1}},data:function(){return{isFocusing:!1,isDragging:!1,isDraggingOver:!1,inspect:!1}},computed:a()({},Object(l.c)(["isPlaying"]),Object(l.b)("favorite",["favSongs"]),Object(l.b)("playlist",["playing"]),{isHeader:function(){return"header"===this.type},isEntity:function(){return"entity"===this.type},isPlayingSong:function(){return this.playing.id===this.song.id},isFavorite:function(){return this.favSongs.includes(this.song.id)}}),methods:{handleClickFav:function(){this.inspect&&console.log("fav icon is clicked"),this.isFavorite?this.$store.dispatch("removeFavSong",this.song.id):this.$store.dispatch("addFavSong",this.song.id)},handleClickPlay:function(){["header","empty"].includes(this.type)||(this.inspect&&console.log("play icon is clicked"),"playlist"===this.playlistType?this.$store.dispatch("switchPlaylistHead",this.index):this.$store.dispatch("playNewSong",this.song))},handleClickMenu:function(t){["header","empty"].includes(this.type)||(this.inspect&&(console.log(t),console.log("more icon is clicked")),this.isFocusing=!0,this.handleMenu(t,{song:this.song,type:this.playlistType,index:this.index,collection:this.collection}))},handleClickEntity:function(){this.isFocusing=!this.isFocusing},handleClickOutside:function(){this.isFocusing=!1},matchKeywords:function(t){return this.highlight?t.replace(new RegExp("(".concat(this.highlight,")"),"g"),'<span class="highlight">$1</span>'):t},handleClickDelete:function(){this.$emit("delete",this.index)},handleClickCover:function(){this.$emit("cover",this.index)},handleDragStart:function(t){t.dataTransfer.setData("text/plain","".concat(this.index)),t.dataTransfer.dropEffect="move",this.isDragging=!0,this.$emit("drag-start",this.index)},handleDragEnd:function(){this.isDragging=!1},handleDragEnter:function(){this.isDraggingOver=!0},handleDragLeave:function(){this.isDraggingOver=!1},handleDragOver:function(t){t.preventDefault()},handleDrop:function(t){t.preventDefault(),this.isDraggingOver=!1,this.index!==~~t.dataTransfer.getData("text/plain")&&this.$emit("drop",{drag:~~t.dataTransfer.getData("text/plain"),drop:this.index})}},filters:{addZero:function(t){return t>=10?"".concat(t):"0".concat(t)}}},d=(e(211),e(2)),h=Object(d.a)(r,n,[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"number",attrs:{title:"编号"}},[i("p",[this._v("#")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"title",attrs:{title:"歌曲"}},[i("p",[this._v("歌曲")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"artist",attrs:{title:"歌手"}},[i("p",[this._v("歌手")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"album",attrs:{title:"专辑"}},[i("p",[this._v("专辑")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"duration",attrs:{title:"时长"}},[i("p",[this._v("时长")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"action",attrs:{title:"操作"}},[i("p",[this._v("操作")])])}],!1,null,"404d69ee",null);h.options.__file="src/components/common/song-list-item.vue";i.a=h.exports},156:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"song-list"},[e("SongListItem",{staticClass:"song-list-header",attrs:{type:"header"}}),t._v(" "),e("ScrollArea",{staticClass:"song-list-body",style:t.bodyStyles,attrs:{"initial-scroll":30*t.hiddenItemCount}},[e("transition-group",{attrs:{tag:"ul"}},[t._t("default")],2),t._v(" "),0===t.itemCount?e("div",{staticClass:"song-list-empty"},[e("p",[t._t("empty-text")],2)]):t._e()],1),t._v(" "),e("FloatBox",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleClickOutside,expression:"handleClickOutside"}],staticClass:"song-list-menu",style:t.menuStyles,attrs:{"draw-triangle":!1,direction:"none"}},[e("FloatBoxItem",{attrs:{"can-hover":!0,icon:!0,tight:!1},nativeOn:{click:function(i){return t.handleClickPlay(i)}}},[e("Icon",{attrs:{slot:"icon",type:"play-2",size:"xs"},slot:"icon"}),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("播放（Ctrl + P）")])],1),t._v(" "),e("FloatBoxItem",{attrs:{"can-hover":!0,icon:!0,tight:!1},nativeOn:{click:function(i){return t.handleClickNext(i)}}},[e("Icon",{attrs:{slot:"icon",type:"play-3",size:"xs"},slot:"icon"}),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("下一首播放")])],1),t._v(" "),e("FloatBoxItem",{attrs:{"can-hover":!0,icon:!0,tight:!1},nativeOn:{click:function(i){return t.handleClickAdd(i)}}},[e("Icon",{attrs:{slot:"icon",type:"plus",size:"xs"},slot:"icon"}),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("添加到歌单")])],1),t._v(" "),t.canDelete?e("FloatBoxItem",{staticClass:"clear",attrs:{"can-hover":!0,icon:!0,tight:!1},nativeOn:{click:function(i){return t.handleClickDelete(i)}}},[e("Icon",{attrs:{slot:"icon",type:"clear",size:"xs"},slot:"icon"}),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("删除（Delete）")])],1):t._e()],1)],1)};n._withStripped=!0;var s=e(47),a=e(5),o=e(43),l=e(42),c=e(11),r={name:"song-list",components:{SongListItem:e(155).a,ScrollArea:c.a,FloatBoxItem:l.a,FloatBox:o.a,Icon:a.a},directives:{ClickOutside:s.a},props:{canDelete:{type:Boolean,default:!1},itemCount:{type:Number,required:!0},hiddenItemCount:{type:Number,default:0},maxVisibleItemCount:{type:Number,default:10},heightType:{type:String,default:"fit",validator:function(t){return["fit","full"].includes(t)}}},data:function(){return{songFocused:{},menuLeft:0,menuTop:0,showMenu:!1,inspect:!1}},computed:{visibleItemCount:function(){return"full"===this.heightType?this.maxVisibleItemCount:"fit"===this.heightType?Math.min(Math.max(this.itemCount,1),this.maxVisibleItemCount):void 0},menuStyles:function(){return{left:"".concat(this.menuLeft,"px"),top:"".concat(this.menuTop,"px"),display:this.showMenu?"initial":"none"}},bodyStyles:function(){return{height:"".concat(30*this.visibleItemCount,"px")}}},methods:{handleMenu:function(t,i){this.songFocused=i,this.showMenu=!0;var e=this.$el.getBoundingClientRect(),n=e.left,s=e.top,a=e.width,o=e.height;this.menuLeft=t.x-n,this.menuTop=t.y-s,this.menuLeft+135>a&&(this.menuLeft-=this.menuLeft+135-a),this.menuTop+135>o+60&&(this.menuTop-=this.menuTop+135-o-60)},handleClickPlay:function(){"playlist"===this.songFocused.type?this.$store.dispatch("switchPlaylistHead",this.songFocused.index):this.$store.dispatch("playNewSong",this.songFocused.song),this.showMenu=!1},handleClickNext:function(){this.$store.dispatch("addToPlaylist",{position:"head",song:this.songFocused.song}),this.showMenu=!1},handleClickAdd:function(){this.$hasher.set("add",this.songFocused.song.id),this.showMenu=!1},handleClickDelete:function(){this.inspect&&console.log("Gonna delete song ".concat(this.songFocused.song.title)),"played"===this.songFocused.type?this.$store.dispatch("removeFromPlayed",this.songFocused.index):"playlist"===this.songFocused.type?this.$store.dispatch("removeFromPlaylist",this.songFocused.index):"collection"===this.songFocused.type&&this.$store.dispatch("removeSongFromCollection",{id:this.songFocused.collection,songId:this.songFocused.song.id}),this.$emit("update"),this.showMenu=!1},handleClickOutside:function(){this.showMenu=!1}},provide:function(){return{handleMenu:this.handleMenu}}},d=(e(213),e(2)),h=Object(d.a)(r,n,[],!1,null,"b9f31b7c",null);h.options.__file="src/components/common/song-list.vue";i.a=h.exports},169:function(t,i,e){},170:function(t,i,e){},211:function(t,i,e){"use strict";var n=e(169);e.n(n).a},213:function(t,i,e){"use strict";var n=e(170);e.n(n).a}}]);