(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{13:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",[n("div",{staticClass:"dialog-box"},[n("CloseButton",{on:{close:t.handleClose}}),t._v(" "),n("div",{staticClass:"title"},[n("div",{staticClass:"title-icon"},[t._t("title-icon")],2),t._v(" "),n("p",[t._t("title")],2)]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"content-top"},[t._t("content-top")],2),t._v(" "),n("div",{staticClass:"content-bottom"},[t._t("content-bottom")],2)])],1)])};i._withStripped=!0;var s={name:"dialog-box",components:{CloseButton:n(153).a},props:{},methods:{handleClose:function(){this.$emit("close")}}},a=(n(160),n(2)),o=Object(a.a)(s,i,[],!1,null,"b7c944ec",null);o.options.__file="src/components/common/dialog-box.vue";e.default=o.exports},143:function(t,e,n){},144:function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("button",{directives:[{name:"title",rawName:"v-title"}],staticClass:"normal-button",class:{highlight:this.highlight,active:this.active}},[this.iconType?e("Icon",{staticClass:"icon",attrs:{type:this.iconType,size:"sm"}}):this._e(),this._v(" "),e("span",{staticClass:"title"},[this._t("default")],2)],1)};i._withStripped=!0;var s=n(9),a={name:"normal-button",components:{Icon:n(5).a},directives:{Title:s.a},props:{iconType:{type:String},active:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}}},o=(n(145),n(2)),r=Object(o.a)(a,i,[],!1,null,"1417b078",null);r.options.__file="src/components/common/normal-button.vue";e.a=r.exports},145:function(t,e,n){"use strict";var i=n(143);n.n(i).a},148:function(t,e,n){},149:function(t,e,n){},153:function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"close-button"},[e("div",{staticClass:"close",on:{click:this.handleClickClose}},[e("Icon",{attrs:{type:"close",size:"3xs"}})],1)])};i._withStripped=!0;var s={name:"close-button",components:{Icon:n(5).a},methods:{handleClickClose:function(){this.$emit("close")}}},a=(n(158),n(2)),o=Object(a.a)(s,i,[],!1,null,"441faaeb",null);o.options.__file="src/components/common/close-button.vue";e.a=o.exports},158:function(t,e,n){"use strict";var i=n(148);n.n(i).a},160:function(t,e,n){"use strict";var i=n(149);n.n(i).a},183:function(t,e,n){},184:function(t,e,n){},185:function(t,e,n){},186:function(t,e,n){},187:function(t,e,n){},188:function(t,e,n){},189:function(t,e,n){},190:function(t,e,n){},191:function(t,e,n){},192:function(t,e,n){},193:function(t,e,n){},194:function(t,e,n){},237:function(t,e,n){"use strict";var i=n(183);n.n(i).a},239:function(t,e,n){t.exports=n.p+"999cafacb4939a8a5967658b6d4e97ea.png"},240:function(t,e,n){"use strict";var i=n(184);n.n(i).a},242:function(t,e,n){"use strict";var i=n(185);n.n(i).a},244:function(t,e,n){"use strict";var i=n(186);n.n(i).a},246:function(t,e,n){t.exports=n.p+"03124197e0e900a22f2aac73123303be.png"},247:function(t,e,n){"use strict";var i=n(187);n.n(i).a},249:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},250:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},251:function(t,e,n){t.exports=n.p+"72fc7a733d7c4ca6ad188b3a64ffede8.jpg"},252:function(t,e,n){t.exports=n.p+"c3137e0de770affcb4a5f0a2d30b8979.jpg"},253:function(t,e,n){t.exports=n.p+"1aa046cd15d32eec801851bbc95e1e68.jpg"},254:function(t,e,n){t.exports=n.p+"81052850839f2835dec9d382d0652a4e.jpg"},255:function(t,e,n){t.exports=n.p+"44d4e86cf0ad76457f9fdd9ed9e56b3c.jpg"},256:function(t,e,n){t.exports=n.p+"a4bd886fdf4440dcd8ba321ee06eb5af.jpg"},257:function(t,e,n){t.exports=n.p+"4ba8bb736d37ccc06143136571f4d343.jpg"},258:function(t,e,n){t.exports=n.p+"331fac24b1df60e5530b5f539dbe7ed0.jpg"},259:function(t,e,n){"use strict";var i=n(188);n.n(i).a},261:function(t,e,n){"use strict";var i=n(189);n.n(i).a},263:function(t,e,n){"use strict";var i=n(190);n.n(i).a},265:function(t,e,n){"use strict";var i=n(191);n.n(i).a},267:function(t,e,n){"use strict";var i=n(192);n.n(i).a},269:function(t,e,n){"use strict";var i=n(193);n.n(i).a},271:function(t,e,n){"use strict";var i=n(194);n.n(i).a},273:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",[n("div",{staticClass:"single"},[n("div",{staticClass:"bg"},[n("img",{attrs:{src:t.noPlaying?"":t.playing.imageUrl}})]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"best"},[n("div",{staticClass:"paint",style:t.topLeftStyles},[n("Star",{staticClass:"paint-star",attrs:{points:t.points,time:t.time},on:{focus:t.handleFocusProgress,seek:t.handleSeekProgress,commit:t.handleCommitProgress}}),t._v(" "),n("div",{staticClass:"paint-img"},[n("img",{attrs:{src:t.noPlaying?"":t.playing.imageUrl}})])],1),t._v(" "),n("div",{staticClass:"text",style:t.rightStyles},[n("div",{staticClass:"info"},[n("p",{staticClass:"title",attrs:{title:t.noPlaying?"":t.playing.title}},[t._v("\n                            "+t._s(t.noPlaying?"":t.playing.title)+"\n                        ")]),t._v(" "),n("p",{staticClass:"work",attrs:{title:t.noPlaying?"":t.playing.work}},[t._v("\n                            "+t._s(t.noPlaying?"":t.playing.work)+"\n                        ")]),t._v(" "),n("p",{staticClass:"artist"},[t._v("\n                            歌手：\n                            "),t._l(t.playing.simpleArtistInfos||[],function(e,i){return[n("router-link",{key:i,staticClass:"highlight",attrs:{to:{name:"artist-detail",params:{id:e.id}},title:e.name}},[t._v("\n                                    "+t._s(e.name)+"\n                                ")]),t._v(" "),i!==t.playing.simpleArtistInfos.length-1?[t._v("\n                                    /\n                                ")]:t._e()]})],2),t._v(" "),n("p",{staticClass:"album",attrs:{title:t.noPlaying?"":t.playing.album}},[t._v("\n                            专辑：\n                            "),t.playing.simpleAlbumInfo?n("router-link",{staticClass:"highlight",attrs:{to:{name:"album-detail",params:{id:t.playing.simpleAlbumInfo.id}},title:t.playing.album}},[t._v("\n                                "+t._s(t.playing.album)+"\n                            ")]):t._e()],1),t._v(" "),n("p",{staticClass:"from"},[t._v("\n                            来源：\n                            "),t.playing.from?n("router-link",{staticClass:"highlight",attrs:{to:t.playing.from.url,title:t.playing.from.name}},[t._v("\n                                "+t._s(t.playing.from.name)+"\n                            ")]):t._e()],1)]),t._v(" "),n("div",{staticClass:"action"},[n("ActionButton",{staticClass:"action-btn",attrs:{title:"喜欢",type:"favorite-"+(t.isFavorite?"2":"1"),color:"#d1382a"},nativeOn:{click:function(e){return t.handleClickFav(e)}}},[t._v("\n                            喜欢\n                        ")]),t._v(" "),n("ActionButton",{staticClass:"action-btn",attrs:{title:"添加",type:"addto"}},[t._v("添加")]),t._v(" "),n("ActionButton",{staticClass:"action-btn",attrs:{title:"下载",type:"dl"}},[t._v("下载")]),t._v(" "),n("ActionButton",{staticClass:"action-btn",attrs:{title:"分享",type:"share"}},[t._v("分享")])],1)])]),t._v(" "),n("div",{staticClass:"rcmb",style:t.bottomStyles},[n("RcmBoard",{staticClass:"rcmb-song",style:t.bottomLeftStyles},[n("template",{slot:"title"},[t._v("\n                        相关歌曲\n                    ")]),t._v(" "),n("router-link",{attrs:{slot:"content",to:"#"},slot:"content"},[n("RcmSong",{attrs:{"image-src":t.cover1}},[n("template",{slot:"title"},[t._v("コレカラ")]),t._v(" "),n("template",{slot:"artist"},[t._v("Machico")]),t._v(" "),n("template",{slot:"count"},[t._v("1234")])],2),t._v(" "),n("RcmSong",{attrs:{"image-src":t.cover3}},[n("template",{slot:"title"},[t._v("これからのSomeday")]),t._v(" "),n("template",{slot:"artist"},[t._v("μ's")]),t._v(" "),n("template",{slot:"count"},[t._v("8")])],2)],1)],2),t._v(" "),n("RcmBoard",{staticClass:"rcmb-user",style:t.rightStyles},[n("template",{slot:"title"},[t._v("\n                        喜欢这首歌的人\n                    ")]),t._v(" "),t._l(12,function(e){return n("router-link",{key:e,attrs:{slot:"content",to:{name:"artist-detail",params:{id:10+e}}},slot:"content"},[n("RcmUser",{attrs:{"image-src":t.artistList[e%6]}})],1)}),t._v(" "),n("div",{staticClass:"rcmb-user-count",attrs:{slot:"content"},slot:"content"},[n("p",[t._v("\n                            ...等\n                            "),n("span",[t._v("\n                            "+t._s(150)+"\n                        ")]),t._v("\n                            人\n                        ")])])],2)],1)])])])};i._withStripped=!0;for(var s=n(7),a=n.n(s),o=n(3),r=n(4),l=n(249),c=n.n(l),u=n(250),d=n.n(u),h=function(){function t(e,n){c()(this,t),this.a=e,this.b=n}return d()(t,[{key:"scaleTo",value:function(t){var e=t/Math.sqrt(Math.pow(this.a,2)+Math.pow(this.b,2));return this.scale(e),this}},{key:"scale",value:function(t){return this.a*=t,this.b*=t,this}},{key:"output",value:function(){return"".concat(this.a,",").concat(this.b)}},{key:"add",value:function(e){return e instanceof t?(this.a+=e.a,this.b+=e.b):(this.a+=e,this.b+=e),this}},{key:"minus",value:function(e){return e instanceof t?(this.a-=e.a,this.b-=e.b):(this.a-=e,this.b-=e),this}},{key:"multiply",value:function(t){return this.a*=t,this.b*=t,this}},{key:"divide",value:function(t){return this.a/=t,this.b/=t,this}},{key:"length",value:function(){return Math.sqrt(Math.pow(this.a,2)+Math.pow(this.b,2))}},{key:"normalize",value:function(){return this.divide(this.length())}},{key:"copy",value:function(){return new t(this.a,this.b)}}]),t}(),p=function(){function t(e){c()(this,t),this.reg=Math.PI*e/180,this.main=new h(Math.cos(this.reg),Math.sin(this.reg)),this.left=new h(Math.sin(this.reg),-Math.cos(this.reg)),this.right=new h(-Math.sin(this.reg),Math.cos(this.reg)),this.left.scaleTo(Math.PI/(18*Math.random()+8)),this.right.scaleTo(Math.PI/(18*Math.random()+8)),this.left.add(this.main),this.right.add(this.main)}return d()(t,[{key:"scale",value:function(t){return this.left.scale(t),this.main.scale(t),this.right.scale(t),this}}]),t}(),m=[],g=0;g<10;g++)m.push(new p(36*(g-.25+.5*Math.random())));var v=m,f=n(251),_=n.n(f),y=n(252),C=n.n(y),b=n(253),w=n.n(b),x=n(254),k=n.n(x),S=n(255),I=n.n(S),P=n(256),M=n.n(P),B=n(257),N=n.n(B),$=n(258),R=n.n($),O=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"action-button"},[e("div",{staticClass:"icon"},[e("Icon",{attrs:{type:this.type,color:this.color,size:"xl"}})],1),this._v(" "),e("div",{staticClass:"label"},[this._t("default")],2)])};O._withStripped=!0;var j={name:"action-button",components:{Icon:n(5).a},props:{type:String,color:String}},U=(n(259),n(2)),D=Object(U.a)(j,O,[],!1,null,"dd6a61d6",null);D.options.__file="src/components/common/action-button.vue";var A=D.exports,T=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rec-board"},[e("div",{staticClass:"rec-board-title"},[e("p",[this._t("title",[this._v("标题")])],2)]),this._v(" "),e("div",{staticClass:"rec-board-content"},[this._t("content",[this._v("\n            内容\n        ")])],2)])};T._withStripped=!0;var V={name:"rec-board"},z=(n(261),Object(U.a)(V,T,[],!1,null,"aaa4a2be",null));z.options.__file="src/components/common/rcm-board.vue";var F=z.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rcm-song"},[n("div",{staticClass:"cover"},[n("Thumbnail",{attrs:{slot:"cover",src:t.imageSrc,"is-round":!1,"border-color":"#e1e5e6",size:"36px"},slot:"cover"})],1),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"content-right"},[n("p",{staticClass:"count"},[t._t("count"),t._v("\n                人听过\n            ")],2)]),t._v(" "),n("div",{staticClass:"content-left"},[n("p",{staticClass:"text"},[t._t("title"),t._v("\n                -\n                "),t._t("artist")],2)])])])};E._withStripped=!0;var H=n(12),W={name:"rcm-song",components:{Thumbnail:H.a},props:{imageSrc:{type:String,required:!0}}},q=(n(263),Object(U.a)(W,E,[],!1,null,"117614aa",null));q.options.__file="src/components/common/rcm-song.vue";var L=q.exports,G=function(){var t=this.$createElement;return(this._self._c||t)("Thumbnail",{staticClass:"rcm-user",attrs:{src:this.imageSrc,"is-round":!0,"border-color":"#e1e5e6",size:"36px"}})};G._withStripped=!0;var J={name:"rcm-user",components:{Thumbnail:H.a},props:{imageSrc:{type:String,required:!0}}},Y=(n(265),Object(U.a)(J,G,[],!1,null,"b3de7f40",null));Y.options.__file="src/components/common/rcm-user.vue";var Z=Y.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t.columnWidth,height:t.columnWidth,viewBox:"0 0 "+t.columnWidth+" "+t.columnWidth}},[n("defs",[n("linearGradient",{attrs:{id:"grad-1",x1:t.headPositionNormal.a,y1:t.headPositionNormal.b,x2:t.headPositionHalfDegNormal.a,y2:t.headPositionHalfDegNormal.b}},[n("stop",{attrs:{offset:"0","stop-color":"#f5e371"}}),t._v(" "),n("stop",{attrs:{offset:"1","stop-color":"#f67b48"}})],1),t._v(" "),n("linearGradient",{attrs:{id:"grad-2",x1:"1",y1:"0",x2:t.headPositionHalfDegNormal.a,y2:t.headPositionHalfDegNormal.b}},[n("stop",{attrs:{offset:"0","stop-color":"#f74231"}}),t._v(" "),n("stop",{attrs:{offset:"1","stop-color":"#f67b48"}})],1),t._v(" "),n("linearGradient",{attrs:{id:"grad-3",x1:"0",y1:"1",x2:"0",y2:"0"}},[n("stop",{attrs:{offset:"0","stop-color":"#f74231"}}),t._v(" "),n("stop",{attrs:{offset:"1","stop-color":"#f5e371"}})],1),t._v(" "),n("filter",{attrs:{id:"shine",x:"-1",y:"-1",width:"3",height:"3"}},[n("feColorMatrix",{attrs:{result:"matrixOut",in:"SourceGraphic",type:"matrix",values:"1 0 0 0 1\n                                   0 1 0 0 1\n                                   0 0 1 0 1\n                                   0 0 0 1 0"}}),t._v(" "),n("feGaussianBlur",{attrs:{result:"blurOut",in:"matrixOut",stdDeviation:"2"}}),t._v(" "),n("feBlend",{attrs:{result:"blendOut",in:"blurOut",in2:"blurOut",mode:"normal"}}),t._v(" "),n("feBlend",{attrs:{in:"SourceGraphic",in2:"blendOut",mode:"normal"}})],1)],1),t._v(" "),n("g",{attrs:{transform:"translate("+t.outerRadius+", "+t.outerRadius+"), rotate(-90, 0, 0)"}},[n("circle",{directives:[{name:"show",rawName:"v-show",value:0!==t.time||t.isPlaying||t.drag.isDragging,expression:"time !== 0 || isPlaying || drag.isDragging"}],attrs:{cx:"0",cy:"0",r:t.innerRadius+1,stroke:"url(#grad-1)","stroke-width":"3",fill:"none","stroke-dasharray":t.basicLengthFloat+" 630","stroke-linecap":"round"}}),t._v(" "),n("circle",{directives:[{name:"show",rawName:"v-show",value:0!==t.time||t.isPlaying||t.drag.isDragging,expression:"time !== 0 || isPlaying || drag.isDragging"}],attrs:{cx:"0",cy:"0",r:t.innerRadius+1,stroke:"url(#grad-2)","stroke-width":"3",fill:"none","stroke-dasharray":t.basicLengthFloat/2+" 630","stroke-linecap":"round"}}),t._v(" "),n("circle",{attrs:{cx:t.headPosition.a,cy:t.headPosition.b,r:"3.5",stroke:"white","stroke-width":"1",fill:"#f5e371",filter:"url(#shine)"}}),t._v(" "),n("path",{attrs:{d:"\n            M "+t.points[0].main.output()+"\n            C "+t.points.map(function(t,e,n){return"\n                    "+t.right.output()+"\n                    "+n[e+1===n.length?0:e+1].left.output()+"\n                    "+n[e+1===n.length?0:e+1].main.output()+"\n                "})+"\n            M 110,0\n            A 110 110 0 1 1 -110,0\n              110 110 0 1 1 110,0\n        ","fill-rule":"evenodd",fill:"url(#grad-3)"}}),t._v(" "),n("circle",{directives:[{name:"drag",rawName:"v-drag",value:t.dragHandlers,expression:"dragHandlers"}],staticClass:"event-receiver",attrs:{cx:"0",cy:"0",r:t.outerRadius,fill:"white","fill-opacity":"0"}})])])};K._withStripped=!0;var Q={name:"star",directives:{Drag:n(10).a},props:{columnWidth:{type:Number,default:320},points:{type:Array,required:!0},time:{type:Number,default:0}},data:function(){return{innerRadius:100,drag:{isDragging:!1,refRect:void 0,seekingReg:0},dragHandlers:{mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp},inspect:!1}},computed:a()({},Object(r.c)(["isPlaying"]),Object(r.b)("playlist",["playing","isFavorite","noPlaying"]),{duration:function(){return this.noPlaying?1:this.playing.duration/1e3},progress:function(){return this.drag.isDragging?this.drag.seekingReg/(2*Math.PI):this.time/this.duration},outerRadius:function(){return this.columnWidth/2},basicLengthFloat:function(){return 2*this.innerRadius*Math.PI*this.progress},headPositionNormal:function(){var t=2*this.progress*Math.PI;return this.getPointNormal(t)},headPositionHalfDegNormal:function(){var t=this.progress*Math.PI;return this.getPointNormal(t)},headPosition:function(){return this.headPositionNormal.copy().multiply(2).minus(1).multiply(this.innerRadius)},dragValue:function(){return this.drag.seekingReg/(2*Math.PI)*this.duration}}),methods:{getPointNormal:function(t){return new h(Math.cos(t),Math.sin(t)).add(1).divide(2)},getReg:function(t){var e=new h(160,160),n=t.minus(e).normalize(),i=n.a,s=n.b,a=s<0?2*Math.PI-Math.acos(i):Math.acos(i);return a=a<=3*Math.PI/2?a+Math.PI/2:a-3*Math.PI/2,this.inspect&&(console.log(t),console.log("a: ".concat(i,", b: ").concat(s)),console.log(a)),a},handleMouseDown:function(t){this.inspect&&(console.log("handleMousedown "+t.x),console.log(t)),this.drag.isDragging=!0;var e=t.target.getBoundingClientRect();this.drag.refRect=new h(e.left,e.top);var n=new h(t.x,t.y);this.drag.seekingReg=this.getReg(n.minus(this.drag.refRect)),this.inspect&&console.log("start reg "+this.drag.seekingReg),this.$emit("focus",!0)},handleMouseMove:function(t){this.inspect&&console.log("handleMouseMove "+t.x);var e=new h(t.x,t.y);this.drag.seekingReg=this.getReg(e.minus(this.drag.refRect)),this.inspect&&console.log("start reg "+this.drag.seekingReg),this.$emit("seek",this.dragValue)},handleMouseUp:function(t){this.inspect&&console.log("handleMouseUp "+t.x);var e=new h(t.x,t.y);this.drag.seekingReg=this.getReg(e.minus(this.drag.refRect)),this.inspect&&console.log("start reg "+this.drag.seekingReg),this.$emit("commit",this.dragValue),this.$emit("focus",!1),this.drag.isDragging=!1,this.drag.refRect=void 0,this.drag.seekingReg=0}}},X=(n(267),Object(U.a)(Q,K,[],!1,null,"b29a1c18",null));X.options.__file="src/components/popup/single-star.vue";var tt={name:"single",components:{Star:X.exports,RcmUser:Z,RcmSong:L,RcmBoard:F,ActionButton:A},props:{time:{type:Number,default:0}},data:function(){return{points:v.map(function(t,e){return t.scale(e%2==0?160-15*Math.random():115+15*Math.random())}),cover1:_.a,cover3:C.a,artistList:[w.a,k.a,I.a,M.a,N.a,R.a]}},watch:{playing:function(t){if(!this.noPlaying){var e=t;""===e.work&&this.$ajax.getSongsFullAsync(this.playing.id).then(function(t){t[0].simpleWorkInfo&&(e.work=t[0].simpleWorkInfo.title)})}}},computed:a()({},Object(r.b)("playlist",["playing","noPlaying"]),Object(r.b)(["isFavorite","width","height"]),{topLeftStyles:function(){return{width:"".concat(this.columnWidth,"px"),height:"".concat(this.columnWidth,"px")}},rightStyles:function(){return{width:"".concat(this.columnWidth,"px"),marginLeft:"".concat(this.columnGapWidth,"px")}},bottomStyles:function(){return{marginTop:"".concat(this.columnGapHeight,"px")}},bottomLeftStyles:function(){return{width:"".concat(this.columnWidth,"px")}},columnGapHeight:function(){return(o.a.filterInteger(this.height,618,818)-18)/20},columnGapWidth:function(){return o.a.filterInteger(this.width,1e3,1600)/20},columnWidth:function(){return~~((o.a.filterInteger(this.height,618,818)+22)/2)}}),methods:{handleSeekProgress:function(t){this.$emit("seek",t)},handleCommitProgress:function(t){this.$emit("commit",t)},handleFocusProgress:function(t){this.$emit("focus",t)},handleClickFav:function(){this.isFavorite?this.$store.dispatch("removeFavSong",this.playing.id):this.$store.dispatch("addFavSong",this.playing.id)}}},et=(n(269),Object(U.a)(tt,i,[],!1,null,"261824ca",null));et.options.__file="src/components/popup/single.vue";e.default=et.exports},274:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DialogBox",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleClose,expression:"handleClose"}],staticClass:"sign-dialog",on:{close:t.handleClose},nativeOn:{keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleConfirm(e):null}}},[t.isSignIn?n("template",{slot:"title"},[t._v("\n        帐号登录\n    ")]):n("template",{slot:"title"},[t._v("\n        帐号注册\n    ")]),t._v(" "),n("template",{slot:"content-top"},[n("div",{staticClass:"hint"},[t.isSignIn?[n("p",[t._v("\n                    登录您的DD Music帐号。\n                ")]),t._v(" "),n("p",[t._v("\n                    加推列表等信息将在后台与服务器数据同步。\n                ")])]:[n("p",[t._v("\n                    我们将尽最大努力保护您的帐号安全。\n                ")]),t._v(" "),n("p",[t._v("\n                    但仍建议您"),n("span",{staticClass:"warning"},[t._v("使用与其他网站不同的密码")]),t._v("。\n                ")])]],2),t._v(" "),n("InputBox",{staticClass:"input",attrs:{"input-type":"text","icon-type":t.passed.userId&&t.isSignUp?"ok":"artist",value:t.userId,placeholder:t.isSignIn?"用户名 / 学号 / 邮箱":"学号",extra:t.isSignUp,passed:t.passed.userId&&t.isSignUp},on:{"update:value":function(e){t.userId=e},change:t.handleChangeUserId}},[t._v("\n            @zju.edu.cn\n        ")]),t._v(" "),n("InputBox",{staticClass:"input",attrs:{"input-type":"password","icon-type":t.passed.password&&t.isSignUp?"ok":"lock-1",value:t.password,placeholder:"密码",passed:t.passed.password&&t.isSignUp},on:{"update:value":function(e){t.password=e},input:t.handleInputPassword}}),t._v(" "),n("transition",[n("InputBox",{directives:[{name:"show",rawName:"v-show",value:t.isSignUp,expression:"isSignUp"}],staticClass:"input",attrs:{"input-type":"password","icon-type":t.passed.passwordConfirmed?"ok":"lock-2",value:t.passwordConfirmed,passed:t.passed.passwordConfirmed,placeholder:"确认密码"},on:{"update:value":function(e){t.passwordConfirmed=e},change:t.handleChangePasswordConfirmed}})],1),t._v(" "),n("transition",[n("InputBox",{directives:[{name:"show",rawName:"v-show",value:t.isSignUp,expression:"isSignUp"}],staticClass:"input",attrs:{"input-type":"text","icon-type":t.passed.username?"ok":"at",value:t.username,passed:t.passed.username,placeholder:"输入一个用户名"},on:{"update:value":function(e){t.username=e},change:t.handleChangeUsername}})],1)],1),t._v(" "),n("template",{slot:"content-bottom"},[n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSignUp,expression:"isSignUp"}],staticClass:"return",on:{click:t.toSignIn}},[n("p",[t._v("<返回帐号登录")])])]),t._v(" "),n("div",{staticClass:"button-group"},[n("transition",[n("NormalButton",{directives:[{name:"show",rawName:"v-show",value:t.isSignIn,expression:"isSignIn"}],staticClass:"button",attrs:{active:!0},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("\n                    登录\n                ")])],1),t._v(" "),n("transition",[n("NormalButton",{staticClass:"button",attrs:{active:t.isSignUp},nativeOn:{click:function(e){return t.handleClickSignUp(e)}}},[t._v("\n                    注册"+t._s(t.isSignUp?"新账号":"")+"\n                ")])],1)],1),t._v(" "),n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSignIn,expression:"isSignIn"}],staticClass:"third-party"},[n("div",{staticClass:"name"},[n("p",[t._v("其他方式登录")])]),t._v(" "),n("div",{staticClass:"link-group"},[n("ThirdPartyLink",{staticClass:"link",attrs:{"image-src":t.cc98logo,"theme-color":"#28a7e1",url:t.cc98url}},[t._v("\n                        CC98\n                    ")])],1)])])],1)],2)};i._withStripped=!0;var s=n(239),a=n.n(s),o=n(46),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-box"},[n("div",{staticClass:"input-box-hint",on:{click:t.handleClickHint}},[n("Icon",{staticClass:"input-box-icon",class:t.iconClasses,attrs:{type:t.iconType,size:"sm"}}),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:""===t.myValue&&!t.isFocusing,expression:"myValue === '' && !isFocusing"}]},[t._v(t._s(t.placeholder))])],1),t._v(" "),n("transition",[t.extra?n("div",{staticClass:"input-box-extra",on:{click:t.handleClickHint}},[n("p",[t._t("default")],2)]):t._e()]),t._v(" "),n("label",["checkbox"===t.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.myValue,expression:"myValue"}],ref:"input",style:t.inputStyles,attrs:{title:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.myValue)?t._i(t.myValue,null)>-1:t.myValue},on:{focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput,change:[function(e){var n=t.myValue,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t._i(n,null);i.checked?a<0&&(t.myValue=n.concat([null])):a>-1&&(t.myValue=n.slice(0,a).concat(n.slice(a+1)))}else t.myValue=s},t.handleChange]}}):"radio"===t.inputType?n("input",{directives:[{name:"model",rawName:"v-model",value:t.myValue,expression:"myValue"}],ref:"input",style:t.inputStyles,attrs:{title:t.placeholder,type:"radio"},domProps:{checked:t._q(t.myValue,null)},on:{focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput,change:[function(e){t.myValue=null},t.handleChange]}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.myValue,expression:"myValue"}],ref:"input",style:t.inputStyles,attrs:{title:t.placeholder,type:t.inputType},domProps:{value:t.myValue},on:{focus:t.handleFocus,blur:t.handleBlur,input:[function(e){e.target.composing||(t.myValue=e.target.value)},t.handleInput],change:t.handleChange}})])],1)};r._withStripped=!0;var l={name:"input-box",components:{Icon:n(5).a},props:{inputType:{type:String,required:!0},iconType:{type:String,required:!0},placeholder:{type:String,required:!0},value:{type:String,required:!0},extra:{type:Boolean,default:!1},passed:{type:Boolean,default:!1}},data:function(){return{myValue:this.value,isFocusing:!1}},watch:{myValue:function(t){this.$emit("update:value",t)}},computed:{inputStyles:function(){return this.extra?{paddingRight:"100px"}:{}},iconClasses:function(){return[{passed:this.passed}]}},methods:{handleClickHint:function(){this.$refs.input.focus()},handleFocus:function(){this.isFocusing=!0},handleBlur:function(){this.isFocusing=!1},handleInput:function(){this.$emit("input",this.myValue)},handleChange:function(){this.$emit("change",this.myValue)}}},c=(n(240),n(2)),u=Object(c.a)(l,r,[],!1,null,"34a38798",null);u.options.__file="src/components/common/input-box.vue";var d=u.exports,h=n(144),p=function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"third-party-link",attrs:{href:this.url,target:"_blank"}},[e("Thumbnail",{attrs:{src:this.imageSrc,size:"50px","border-color":this.themeColor,"is-round":!0}}),this._v(" "),e("div",{staticClass:"third-party-link-title"},[e("p",[this._t("default")],2)])],1)};p._withStripped=!0;var m={name:"third-party-link",components:{Thumbnail:n(12).a},props:{imageSrc:{type:String,required:!0},themeColor:{type:String,required:!0},url:{type:String,required:!0}}},g=(n(242),Object(c.a)(m,p,[],!1,null,"442ce22a",null));g.options.__file="src/components/common/third-party-link.vue";var v=g.exports,f=n(13),_={name:"sign-dialog",components:{ThirdPartyLink:v,NormalButton:h.a,InputBox:d,DialogBox:f.default},directives:{ClickOutside:o.a},data:function(){return{mode:"sign-in",userId:"",password:"",passwordConfirmed:"",username:"",cc98url:"https://openid.cc98.org/connect/authorize?client_id=81b172e6-6a62-4fee-3a7b-08d571f52ead&scope=openid%20cc98-api&response_type=id_token%20token&redirect_uri=".concat(location.origin,"&state=abc&nonce=xyz"),cc98logo:a.a,passed:{userId:!1,password:!1,passwordConfirmed:!1,username:!1},inspect:!1}},computed:{isSignIn:function(){return"sign-in"===this.mode},isSignUp:function(){return"sign-up"===this.mode}},methods:{handleClose:function(){this.$emit("close")},handleConfirm:function(){this.isSignIn?this.signIn():this.signUp()},handleClickSignUp:function(){this.isSignIn?this.toSignUp():this.signUp()},toSignUp:function(){this.mode="sign-up"},toSignIn:function(){this.mode="sign-in"},signIn:function(){this.inspect&&console.log("Ready to submit: userId = ".concat(this.userId,", password = ").concat(this.password))},signUp:function(){this.inspect&&console.log("Ready to submit: userId = ".concat(this.userId,", password = ").concat(this.password,", username = ").concat(this.username))},handleChangeUserId:function(t){t&&(this.passed.userId=!0)},handleInputPassword:function(t){t&&(this.passed.password=!0)},handleChangePasswordConfirmed:function(t){t&&(this.passed.passwordConfirmed=!0)},handleChangeUsername:function(t){t&&(this.passed.username=!0)}}},y=(n(244),Object(c.a)(_,i,[],!1,null,"be9897d6",null));y.options.__file="src/components/popup/sign-dialog.vue";e.default=y.exports},293:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.nextSong&&t.nextSong.id!==t.playing.id&&t.timeRemain<=t.threshold&&!t.closed?n("div",{staticClass:"song-indicator"},[n("CloseButton",{on:{close:t.handleClose}}),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"image"},[n("img",{attrs:{src:t.nextSong.imageUrl}})]),t._v(" "),n("div",{staticClass:"text"},[n("p",{staticClass:"first-line"},[t._v("\n                即将播放\n            ")]),t._v(" "),n("p",{staticClass:"second-line"},[t._v("\n                "+t._s(t.nextSong.title)+" - "+t._s(t.nextSong.artist.join(" / "))+"\n            ")])])]),t._v(" "),n("ProgressBar",{staticClass:"bar",attrs:{total:t.threshold,value:t.timeRemain,"allow-interaction":!1,smooth:!0,"background-color":"transparent"}})],1):t._e()};i._withStripped=!0;var s=n(7),a=n.n(s),o=n(4),r=n(153),l=n(56),c={name:"song-indicator",components:{CloseButton:r.a,ProgressBar:l.a},props:{currentTime:{type:Number,required:!0}},data:function(){return{closed:!1,threshold:3}},computed:a()({},Object(o.b)("playlist",["playing","playlist","nextSong"]),{duration:function(){return this.playing.duration},timeRemain:function(){return this.playing.duration/1e3-this.currentTime}}),watch:{timeRemain:function(t){t>this.threshold&&(this.closed=!1)}},methods:{handleClose:function(){this.closed=!0}}},u=(n(271),n(2)),d=Object(u.a)(c,i,[],!1,null,"635f5e2a",null);d.options.__file="src/components/popup/song-indicator.vue";e.default=d.exports},294:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DialogBox",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleClose,expression:"handleClose"}],staticClass:"about-box",on:{close:t.handleClose}},[n("Icon",{attrs:{slot:"title-icon",type:"information",size:"sm"},slot:"title-icon"}),t._v(" "),n("template",{slot:"title"},[n("span",[t._v("关于")])]),t._v(" "),n("template",{slot:"content-top"},[n("div",{staticClass:"title"},[n("p",[t._v("产品信息")])]),t._v(" "),n("div",{staticClass:"logo"},[n("img",{attrs:{id:"logo-with-text",src:""}})]),t._v(" "),n("ScrollArea",{staticClass:"scroll"},[n("div",{staticClass:"product"},[n("p",[t._v("DD Player")])]),t._v(" "),n("div",{staticClass:"version"},[n("p",[t._v("版本："+t._s(t.version)+" build "+t._s(t.isElectron?"Electron":"Web"))])]),t._v(" "),n("div",{staticClass:"contributors"},[n("p",[t._v("贡献者：\n                    "),n("a",{staticClass:"highlight",attrs:{href:"mailto:tsukiko@outlook.com"}},[t._v("Tsukiko15")]),t._v(" "),n("a",{staticClass:"highlight",attrs:{href:"mailto:zjubank@gmail.com"}},[t._v("zjubank")]),t._v(" "),n("a",{staticClass:"highlight",attrs:{href:"mailto:yunzhe@zju.edu.cn"}},[t._v("Yunzhe")])])]),t._v(" "),n("div",{staticClass:"homepage"},[n("p",[t._v("项目主页：\n                    "),n("a",{staticClass:"highlight",attrs:{href:"https://github.com/Tsukiko15/NAP.Api"}},[t._v("\n                        NAP.Api\n                    ")]),t._v(" "),n("a",{staticClass:"highlight",attrs:{href:"https://github.com/YunzheZJU/DDPlayer"}},[t._v("\n                        DDPlayer\n                    ")])])]),t._v(" "),n("div",{staticClass:"rights"},[n("p",[t._v("Anisong Project")])]),t._v(" "),n("div",{staticClass:"suggestions"},[n("p",[n("a",{staticClass:"highlight",attrs:{href:"mailto:yunzhe@zju.edu.cn"}},[t._v("帮助我们做得更好")])])]),t._v(" "),n("div",{staticClass:"button-group"},[n("NormalButton",{nativeOn:{click:function(e){return t.handleClearCache(e)}}},[t._v("\n                    清除缓存\n                ")]),t._v(" "),n("NormalButton",{nativeOn:{click:function(e){return t.handleClearSettings(e)}}},[t._v("\n                    重置设置\n                ")])],1)])],1),t._v(" "),n("template",{slot:"content-bottom"},[n("div",{staticClass:"button-close"},[n("NormalButton",{attrs:{active:!0},nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("\n                关闭\n            ")])],1)])],2)};i._withStripped=!0;var s=n(7),a=n.n(s),o=n(4),r=n(46),l=n(5),c=n(246),u=n.n(c),d=n(144),h=n(11),p=n(13),m={name:"about-dialog",components:{ScrollArea:h.a,DialogBox:p.default,Icon:l.a,NormalButton:d.a},directives:{ClickOutside:r.a},data:function(){return{isElectron:!0}},computed:a()({},Object(o.c)(["version"])),methods:{handleClose:function(){this.$emit("close")},handleClearCache:function(){var t=this;this.$ajax.clearCacheStorage().then(function(){t.$store.dispatch("addMessage",{type:"ok",content:"数据缓存已清除，刷新后生效"})})},handleClearSettings:function(){var t=this;this.$store.dispatch("clearSettingsStorage").then(function(){t.$store.dispatch("addMessage",{type:"ok",content:"设置已重置，登录信息已清除，刷新后生效"})})}},mounted:function(){document.getElementById("logo-with-text").src=u.a}},g=(n(247),n(2)),v=Object(g.a)(m,i,[],!1,null,"93b5a6ca",null);v.options.__file="src/components/popup/about-dialog.vue";e.default=v.exports},295:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DialogBox",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"},{name:"click-outside",rawName:"v-click-outside",value:t.handleClose,expression:"handleClose"}],staticClass:"add-to-dialog",style:t.addStyles,on:{close:t.handleClose}},[n("Icon",{attrs:{slot:"title-icon",type:"edit",size:"sm"},slot:"title-icon"}),t._v(" "),n("template",{slot:"title"},[n("span",[t._v("添加到歌单")])]),t._v(" "),n("template",{slot:"content-top"},[n("div",{staticClass:"edit-list"},[n("div",{staticClass:"title"},[n("div",{staticClass:"collection"},[n("p",[t._v("歌单")])]),t._v(" "),n("div",{staticClass:"add"},[n("p",[t._v("添加")])])]),t._v(" "),n("ScrollArea",{style:t.listStyles},[n("ul",t._l(t.collectionsData,function(e,i){return n("li",{key:i,staticClass:"item"},[n("div",{staticClass:"collection"},[e.imageUrl?[n("Thumbnail",{staticClass:"collection-thumbnail",attrs:{size:"25px",src:e.imageUrl}})]:[n("div",{staticClass:"collection-empty"},[n("Icon",{staticClass:"collection-empty-icon",attrs:{type:"logo",size:"lg"}})],1)],t._v(" "),n("p",{class:["name",{new:0===e.id}]},[t._v(t._s(e.name))])],2),t._v(" "),n("div",{staticClass:"add"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.targetCollections,expression:"targetCollections"}],attrs:{type:"checkbox",title:0===e.id?"创建新歌单":"添加到"+e.name,id:"item-"+e.id},domProps:{value:e.id,checked:Array.isArray(t.targetCollections)?t._i(t.targetCollections,e.id)>-1:t.targetCollections},on:{change:function(n){var i=t.targetCollections,s=n.target,a=!!s.checked;if(Array.isArray(i)){var o=e.id,r=t._i(i,o);s.checked?r<0&&(t.targetCollections=i.concat([o])):r>-1&&(t.targetCollections=i.slice(0,r).concat(i.slice(r+1)))}else t.targetCollections=a}}})])])])}))])],1)]),t._v(" "),n("template",{slot:"content-bottom"},[n("div",{staticClass:"button-group"},[n("NormalButton",{staticClass:"button",attrs:{"icon-type":"edit",active:!0},nativeOn:{click:function(e){return t.handleConfirm(e)}}},[t._v("\n                添加\n            ")]),t._v(" "),n("NormalButton",{staticClass:"button",attrs:{"icon-type":"cancel"},nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("\n                放弃\n            ")])],1)])],2)};i._withStripped=!0;var s=n(6),a=n.n(s),o=n(7),r=n.n(o),l=n(4),c=n(46),u=n(5),d=n(144),h=n(11),p=n(12),m=n(13),g={name:"add-song-dialog",components:{Thumbnail:p.a,DialogBox:m.default,Icon:u.a,NormalButton:d.a,ScrollArea:h.a},directives:{ClickOutside:c.a},data:function(){return{maxItemCount:6,id:-1,targetCollections:[],collectionsData:[]}},watch:{show:function(t){t||this.$hasher.remove("add")}},computed:r()({},Object(l.b)("collection",["collections"]),{addStyles:function(){return{height:"".concat(40*this.collectionsData.length+110,"px"),maxHeight:"".concat(40*this.maxItemCount+110,"px")}},listStyles:function(){return{height:"".concat(40*this.collectionsData.length,"px"),maxHeight:"".concat(40*this.maxItemCount,"px")}},show:function(){return this.id>0}}),methods:{handleConfirm:function(){var t=this;this.targetCollections.filter(function(t){return 0!==t}).forEach(function(e){t.$store.dispatch("addSongToCollection",{id:e,songId:t.id})}),this.collections.filter(function(e){return!t.targetCollections.includes(e.id)}).forEach(function(e){t.$store.dispatch("removeSongFromCollection",{id:e.id,songId:t.id})}),this.targetCollections.includes(0)?(this.$router.push("/collection/newPlaylist#edit&initial=".concat(this.id)),console.log("push")):this.handleClose()},handleClose:function(){this.$hasher.remove("add")},handleHashChange:function(t){this.id=~~t.add,this.updateData()},updateData:function(){var t=this;this.targetCollections=this.collections.filter(function(e){return e.playlist.includes(t.id)}).map(function(t){return t.id}),this.collectionsData=a()(a()(this.collections).map(function(e){e.imageUrl="";var n=e.cover;return-1!==n&&t.$ajax.getSongsSimpleAsync(e.playlist[n]).then(function(t){e.imageUrl=t[0].imageUrl}),e})).concat([{id:0,name:"创建新歌单",imageUrl:""}])}},mounted:function(){this.updateData(),this.handleHashChange(this.$hash),this.$hasher.bind(this.handleHashChange)},destroyed:function(){this.$hasher.unbind(this.handleHashChange)}},v=(n(237),n(2)),f=Object(v.a)(g,i,[],!1,null,"2d329211",null);f.options.__file="src/components/popup/add-song-dialog.vue";e.default=f.exports}}]);